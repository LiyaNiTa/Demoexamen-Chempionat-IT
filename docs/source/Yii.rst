Yii
===============

.. _Что такое Yii?:

Что такое Yii?
---------------

 .. note::
   Yii

Yii – это высокопроизводительный компонентный PHP фреймворк, предназначенный для
быстрой разработки современных веб-приложений.

 .. note::
   Особенности Yii

Как и многие другие PHP фреймворки, для организации кода Yii использует архитектурный
паттерн MVC (Model-View-Controller).
Yii придерживается философии простого и элегантного кода, не пытаясь усложнять
дизайн только ради следования каким-либо шаблонам проектирования.
Yii является full-stack фреймворком и включает в себя проверенные и хорошо
зарекомендовавшие себя возможности, такие как ActiveRecord для реляционных и NoSQL
баз данных, поддержку REST API, многоуровневое кэширование и другие.
Yii отлично расширяем. Вы можете настроить или заменить практически любую часть
основного кода. Используя архитектуру расширений, легко делиться кодом или
использовать код сообщества.
Одна из главных целей Yii – производительность.

 .. note::
   Что такое MVC?
 
Model View Controller (Модель-Представление-Контроллер) — схема разделения данных
приложения, и управляющей логики на три отдельных компонента:

- *модель*
- *представление*
- *контроллер* 

Эти компоненты представлены таким образом, что модификация каждого из них может осуществляться независимо

 .. note::
   Model

Логика манипулирования данными
Взаимодействия с БД (SELECT, INSERT, UPDATE, DELETE)
Предоставляет данные и реагирует на команды контроллера, изменяя свое состояние. В контексте обычного пониманя - это *база данных*.

 .. note::
   View

Представление - это шаблоны. Отвечает за отображение данных модели пользователю, реагируя на изменения модели
Обычно содержит HTML & CSS
Общается с контроллером
Используются шаблонизаторы

 .. note::
   Controller

Получает данные
Обрабатывает запросы
Получает данные из модели
Передает данные в представление

 .. note::
   Кроме MVC, Yii приложения также имеют следующие сущности:

- входные скрипты;
- приложения;
- компоненты приложения;
- модули;
- фильтры;
- виджеты.

.. image:: /_static/photo1714315124.jpeg
   :alt: mvc
   :width: 700

.. Установка и настройка:

Установка и настройка
-----------------------

Скачиваем архив с официального сайта https://www.yiiframework.com/download и распаковываем в папку /opt/lampp/htdocs 

.. image:: /_static/yii.png
   :alt: yii
   :width: 700

Далее открываем папку через Visual Studio Code

.. image:: /_static/vsCode.png
   :alt: vsCode
   :width: 700

В браузере переходим по ссылке http://localhost/web/ на что выдает следующую ошибку (не забудьте запустить XAMPP)

.. image:: /_static/ошибка.png
   :alt: ошибка
   :width: 700

Это значит, что не указан cookieValidationKey в файле /opt/lampp/htdocs/config/web.php Также может возникать ошибка: The directory is not writable by the Web process: /opt/lampp/htdocs/web/assets
В этом случае просто снимаем защиту с папки командой

.. code-block:: console

   $ chmod 777 lampp/htdocs/web/assets

.. image:: /_static/уи_установлен.png
   :alt: уи_установлен
   :width: 700

Далее проверяем подключение к бд, указав правильное имя базы

.. image:: /_static/db.png
   :alt: db
   :width: 700

Настройка адресации: уберем необходимость вводить в путь сайта слово web. Для этого скопируем файл /opt/lampp/htdocs/web/.htaccess в папку /opt/lampp/htdocs и пропишем регулярное выражение

.. code-block:: HTML

   RewriteEngine on
   RewriteRule ^(.+)?$ /web/$1

.. image:: /_static/Настройка адресации.png
   :alt: Настройка адресации
   :width: 700

Добавим строку 'baseUrl' => '', и раскомментируем urlManager для правильной работы переходов по страницам

.. image:: /_static/adress.png
   :alt: adress
   :width: 700

Следующим этапом переходим в конфигурационные файлы и проводим настройу в них. 
ВАЖНО! Конфигурационные файлы находятся по адресу: /opt/lampp/htdocs/config

Вносим следующие изенения в файл web.php  *'language' => 'ru-RU',* - добавляем в первый блок кода после $config = [ *'id' => 'basic',* - это позволит нам перевести валидацию на русский язык.

Работа с gii
---------------

Затем необходимо разкомментировать последнюю строчку блока кода содержащего информацию о *gii*    **'allowedIPs' => ['*'],**. чтобы перейти на страницу кола gii, нужно в браузер ввести следующую ссылку: https://localhost/web/index.php?r=gii 

.. image:: /_static/gii.png
   :alt: gii
   :width: 700

Необходимо в http://localhost/phpmyadmin/index.php?lang=ru создать базу данных с таблицами

 .. note::
   Авторизация: таблица пользователей

Зададим первином ключу автоинкримент и будем требовать логин и пароль. Для безопасности зашифруем пароль через md5

.. image:: /_static/bdShop.png
   :alt: bdShop
   :width: 700

.. image:: /_static/users.png
   :alt: users
   :width: 700

.. image:: /_static/usersTable.png
   :alt: usersTable
   :width: 700

.. image:: /_static/usersData.png
   :alt: usersData
   :width: 700



.. autosummary::
   :toctree: generated

   lumache
